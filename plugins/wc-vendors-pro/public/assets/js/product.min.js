jQuery(function(_){function t(){var e=_("#product-type").val(),t=_("#_virtual").is(":checkbox")?_("input#_virtual:checked").length:_("#_virtual").val(),a=_("#_downloadable").is(":checkbox")?_("input#_downloadable:checked").length:_("#_downloadable").val(),i=".hide_if_downloadable, .hide_if_virtual",r=".show_if_downloadable, .show_if_virtual, .show_if_external";_.each(wcv_frontend_product.product_types,function(e,t){i=i+", .hide_if_"+t,r=r+", .show_if_"+t}),_(i).show().removeClass("is_hidden"),_(i).find("input").removeClass("is_hidden"),_(r).hide().addClass("is_hidden"),_(r).find("input").addClass("is_hidden"),a&&(_(".show_if_downloadable").show().removeClass("is_hidden"),_(".show_if_downloadable").find("input").removeClass("is_hidden")),t&&(_(".show_if_virtual").show().removeClass("is_hidden"),_(".show_if_virtual").find("input").removeClass("is_hidden")),_(".show_if_"+e).show().removeClass("is_hidden"),_(".show_if_"+e).find("input").removeClass("is_hidden"),a&&(_(".hide_if_downloadable").hide().addClass("is_hidden"),_(".hide_if_downloadable").find("input").addClass("is_hidden")),t&&(_(".hide_if_virtual").hide().addClass("is_hidden"),_(".hide_if_virtual").find("input").addClass("is_hidden")),"grouped"==e&&(_(".linked_product").parent().addClass("active"),_("#linked_product").removeClass("hide-all").addClass("active")),_(".hide_if_"+e).hide().addClass("is_hidden"),_(".hide_if_"+e).find("input").addClass("is_hidden"),_("input#_manage_stock").change(),jQuery(".wcv-form").length&&!jQuery(".wcv-search-form").length&&(_(".wcv-form").hasClass("wcv-form-exclude")||_(".wcv-form").parsley().reset())}function u(){var e=_(".wcv-gallery-image").length;return _("#product_images_container").data("gallery_max_upload")-1<e}var r,n,o,l;function e(e,t){_(e).is(":checked")?(t.prop("disabled",!0),t.each(function(){_(this).is(":checkbox")?_(this).removeAttr("checked"):_(this).val("")})):t.prop("disabled",!1)}_("select#product-type").change(function(){var e=_(this).val();"variable"===e?(_("input#_manage_stock").change(),_("input#_downloadable").prop("checked",!1),_("input#_virtual").removeAttr("checked")):"grouped"===e?(_("input#_downloadable").prop("checked",!1),_("input#_virtual").removeAttr("checked")):"external"===e&&(_("input#_downloadable").prop("checked",!1),_("input#_virtual").removeAttr("checked")),t(),_("ul.wc-tabs li:visible").eq(0).find("a").click(),_("body").trigger("woocommerce-product-type-change",e,_(this)),_(".wcv-tabs").find("select.select2").select2()}).change(),_("input#_downloadable, input#_virtual").change(function(){t()}),_(".sale_price_dates_fields").each(function(){var e=!1;_(".sale_price_dates_fields").find("input").each(function(){""!=_(this).val()&&(e=!0)}),e?(_(".sale_schedule").hide(),_(".sale_price_dates_fields").show()):(_(".sale_schedule").show(),_(".sale_price_dates_fields").hide())}),_(".sale_schedule").on("click",function(){return _(".sale_price_dates_fields").show(),_(this).hide(),_(".cancel_sale_schedule").show(),!1}),_(".cancel_sale_schedule").on("click",function(){return _(".sale_price_dates_fields").hide(),_(this).hide(),_(".sale_schedule").show(),!1}),_("input#_manage_stock").change(function(){if(_(this).is(":checked"))_("div.stock_fields").show().removeClass("is_hidden"),_("div.stock_fields").find("input").removeClass("is_hidden"),_(".stock_status_field").hide(),_(".wcv-form").hasClass("wcv-form-exclude")||_(".wcv-form").parsley().reset();else{var e=_("select#product-type").val();_("div.stock_fields").hide().addClass("is_hidden"),_("div.stock_fields").find("input").addClass("is_hidden"),_(".stock_status_field:not( .hide_if_"+e+" )").show(),_(".wcv-form").hasClass("wcv-form-exclude")||_(".wcv-form").parsley().reset()}}).change(),_(".wcv-media-uploader-featured-delete").on("click",function(e){e.preventDefault(),_(".wcv-featuredimg").html(""),_("#_featured_image_id").val(""),_(".wcv-media-uploader-featured-delete").addClass("hidden"),_(".wcv-media-uploader-featured-add").removeClass("hidden")}),_(".wcv-media-uploader-featured-add").on("click",function(e){var t,a,i,r;return e.preventDefault(),i=_(".wcv-featuredimg").data("title"),r=_(".wcv-featuredimg").data("button_text"),void 0===t&&(t=wp.media({title:i,button:{text:r},multiple:!1})).on("select",function(){if(a=t.state().get("selection").first().toJSON(),!(_.trim(a.url.length)<0)){var e=a.sizes.thumbnail?a.sizes.thumbnail.url:a.url;_(".wcv-featuredimg").append('<img src="'+e+'" alt="'+a.caption+'" title="'+a.title+'" style="max-width: 100%;" />'),_("#_featured_image_id").val(a.id),_(".wcv_featured_image_msg").html(""),_(".wcv-featuredimg").css("background-color","#e1e1e1"),_(".wcv-media-uploader-featured-add").addClass("hidden"),_(".wcv-media-uploader-featured-delete").removeClass("hidden")}}),t.open(),!1}),_(document).on("click",function(){var e=_(".attachment.selected").length,t=_("#product_images_container").data("gallery_max_upload"),a=_("#product_images_container").data("gallery_max_selected_notice");t<e&&(_(".max-gallery-selected-warning").remove(),_(".media-frame-toolbar .media-toolbar .media-toolbar-secondary").prepend('<div class="woocommerce-info max-gallery-selected-warning">'+a+"</div>"),_(".media-button-select").attr("disabled",!0)),e<=t&&(_(".max-gallery-selected-warning").remove(),_(".media-button-select").attr("disabled",!1))}),_("#product_images_container").on("click","a.delete",function(e){var t=_("#product_image_gallery");e.preventDefault(),_(this).closest("li.wcv-gallery-image").remove();var a="";return _("#product_images_container ul li.wcv-gallery-image").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");a=a+e+","}),t.val(a),_("#tiptip_holder").removeAttr("style"),_("#tiptip_arrow").removeAttr("style"),!1}),_(".wcv-media-uploader-gallery").on("click",function(e){return e.preventDefault(),function(){var r,n=_("#product_image_gallery"),o=_("#product_images_container ul.product_images"),l=n.val(),d=_("#product_images_container").data("gallery_max_upload"),c=_("#product_images_container").data("gallery_max_selected_notice"),s=_(".wcv-media-uploader-gallery a");if(void 0===r)if((r=wp.media.frames.product_gallery=wp.media({title:s.data("choose"),button:{text:s.data("update")},states:[new wp.media.controller.Library({title:s.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var t,e=r.state().get("selection");_(".max-gallery-images-exceeded-warning").remove();var a=0;if(e.map(function(e){(e=e.toJSON()).id&&!u()&&(l=l?l+","+e.id:e.id,t=e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,o.append('<li class="wcv-gallery-image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+s.data("delete")+'"><svg class="wcv-icon wcv-icon-md"><use xlink:href="'+wcv_frontend_product.assets_url+'svg/wcv-icons.svg#wcv-icon-times"></use></svg></a></li></ul></li>'),_(".wcv_gallery_msg").html("")),a++}),n.val(l),d<a){var i='<div class="max-gallery-images-exceeded-warning">'+c+"</div>";_("#product_images_container").append(i)}}),r.on("close",function(){_(".attachment.selected").removeClass("selected")}),u()){var e=_("#product_images_container").data("gallery_max_notice");alert(e)}else r.open();else r.open()}(),!1}),_("#files_download").on("click",".downloadable_files a.insert",function(){return _(this).closest(".downloadable_files").find("tbody").append(_(this).data("row")),!1}),_("#files_download").on("click",".downloadable_files a.delete",function(){return _(this).closest("tr").remove(),!1}),_(document).on("click",".upload_file_button",function(e){var t=_(this);if(n=t.closest("tr").find(".file_url"),o=t.closest("tr").find(".file_id"),l=t.closest("tr").find(".file_display"),e.preventDefault(),r)r.open();else{var a=[new wp.media.controller.Library({library:wp.media.query(),multiple:!0,title:t.data("choose"),priority:20,filterable:"uploaded"})];(r=wp.media.frames.downloadable_file=wp.media({title:t.data("choose"),library:{type:""},button:{text:t.data("update")},multiple:!0,states:a})).on("select",function(){var t="",a="",i=0;r.state().get("selection").map(function(e){a="file_url"==wcv_frontend_product.wcv_file_display?e.attributes.url:e.attributes.filename,(e=e.toJSON()).url&&(t=e.url),e.id&&(i=e.id)}),n.val(t),l.val(a),o.val(i)}),r.on("ready",function(){r.uploader.options.uploader.params={type:"downloadable_product"}}),r.open()}}),_(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),_("#_shipping_fee_national_disable").change(function(){e(_(this),_(".wcv-disable-national-input"))}),_("#_shipping_fee_national_free").change(function(){e(_(this),_("#_shipping_fee_national")),e(_(this),_("#_national_minimum_shipping_fee")),e(_(this),_("#_national_maximum_shipping_fee")),e(_(this),_("#_national_free_shipping_product"))}),_("#_shipping_fee_international_disable").change(function(){e(_(this),_(".wcv-disable-international-input"))}),_("#_shipping_fee_international_free").change(function(){e(_(this),_("#_shipping_fee_international")),e(_(this),_("#_international_minimum_shipping_fee")),e(_(this),_("#_international_maximum_shipping_fee")),e(_(this),_("#_international_free_shipping_product"))}),_("#shipping").on("click",".wcv_shipping_rates a.insert",function(){var e=_("#wcv_shipping_rates_table tbody tr").length,t=_(this).data("row").replace('id="_wcv_shipping_overrides_"','id="_wcv_shipping_overrides_'+e+'"');return t=t.replace('name="_wcv_shipping_overrides_"','name="_wcv_shipping_overrides_'+e+'"'),_(this).closest(".wcv_shipping_rates").find("tbody").append(t).find("select").select2({placeholderOption:"first",width:"100%"}),!1}),_("#shipping").on("click",".wcv_shipping_rates a.delete",function(){return _(this).closest("tr").remove(),!1}),_(".wcv_shipping_rates tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),_(".select2").select2(),_(".category-select2").select2({maximumSelectionLength:wcv_frontend_product.category_limit,language:{maximumSelected:function(e){return 1!=e.maximum?wcv_frontend_product.select2_maximumSelected_plural:wcv_frontend_product.select2_maximumSelected_single},loadingMore:function(){return wcv_frontend_product.select2_loadingMore},errorLoading:function(){return wcv_frontend_product.select2_errorLoading},noResults:function(){return wcv_frontend_product.select2_noResults},searching:function(){return wcv_frontend_product.select2_searching},removeAllItems:function(){return wcv_frontend_product.select2_removeAllItems}}}),t(),e(_("#_shipping_fee_national_free"),_("#_shipping_fee_national")),e(_("#_shipping_fee_international_free"),_("#_shipping_fee_international")),e(_("#_shipping_fee_national_disable"),_(".wcv-disable-national-input")),e(_("#_shipping_fee_international_disable"),_(".wcv-disable-international-input")),_(".confirm_delete").on("click",function(e){confirm(_(this).data("confirm_text"))||e.preventDefault()});var a=_(".product_attributes").find(".woocommerce_attribute").get();a.sort(function(e,t){var a=parseInt(_(e).attr("rel"),10),i=parseInt(_(t).attr("rel"),10);return a<i?-1:i<a?1:0}),_(a).each(function(e,t){_(".product_attributes").append(t)}),_(".product_attributes .woocommerce_attribute").each(function(e,t){"none"!==_(t).css("display")&&_(t).is(".taxonomy")&&_("select.attribute_taxonomy").find('option[value="'+_(t).data("taxonomy")+'"]').attr("disabled","disabled")}),_(".wcv_product_attributes").on("click",".wcv-metabox h5",function(e){_(e.target).filter(":input, option, .sort").length||_(this).next(".wcv-metabox-content").stop().slideToggle()}).on("click",".expand_all",function(){return _(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").show(),!1}).on("click",".close_all",function(){return _(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").hide(),!1}),_(".wcv-metabox.closed").each(function(){_(this).find(".wcv-metabox-content").hide()}),_(function(){function l(e){var t=_("#wcv-variation-attributes").data("variation_attr");return jQuery.isEmptyObject(t)||(delete t[e],_("#wcv-variation-attributes").data("variation_attr",t)),!1}function n(e,t,a){var i,r={},n=e.parent().data("taxonomy"),o=e.parent().data("index_value");_("#attribute_variation_"+o).is(":checked")&&(e.is("input")?(i=e.val().split(wcv_frontend_product.wc_deliminator),_.each(i,function(e,t){0<_.trim(t).length&&(r[_.trim(t).toLowerCase()]=_.trim(t))})):(i=e.select2("data"),_.each(i,function(e,t){r[t.id]=t.text}))),jQuery.isEmptyObject(r)?l(n):function(e,t,a,i){var r=_("#wcv-variation-attributes").data("variation_attr");jQuery.isEmptyObject(r)&&(r={});var n={};n.values=e,n.position=a,n.name=t,n.label=i,r[t]=n,_("#wcv-variation-attributes").data("variation_attr",r)}(r,n,t,a)}function o(){_(".product_attributes .woocommerce_attribute").each(function(e,t){_(".attribute_position",t).val(parseInt(_(t).index(".product_attributes .woocommerce_attribute"),10));var a=_(this).data("index_value");n(t=_("#attribute_values_"+a),_("#attribute_position_"+a).val(),_(this).data("label"))})}_("button.add_attribute").on("click",function(){var e=_(".product_attributes .woocommerce_attribute").length,t=_("select.attribute_taxonomy").val();if(t){var a=_(".product_attributes "),i=_("#product-type").val(),r={action:"wcv_json_add_attribute",taxonomy:t,i:e,security:wcv_frontend_product.wcv_add_attribute_nonce};return _.post(wcv_frontend_product.ajax_url,r,function(e){e.error?window.alert(e.error):(a.append(e),_("select.attribute_values").filter(":not(.select12-hidden-accessible)").select2(),"variable"!==i&&a.find(".enable_variation").hide(),_(document.body).trigger("wc-enhanced-select-init"),o(),_(document.body).trigger("woocommerce_added_attribute"))}),t&&(_("select.attribute_taxonomy").find('option[value="'+t+'"]').attr("disabled","disabled"),_("select.attribute_taxonomy").val("")),!1}}),_(".product_attributes").on("click","button.select_all_attributes",function(){var e=_(this).parent().data("index_value");return _("#attribute_values_"+e+" > option").prop("selected","selected"),_("#attribute_values_"+e).trigger("change"),d(),!1}),_(".product_attributes").on("click","button.select_no_attributes",function(){var e=_(this).parent().data("index_value"),t=_(this).parent().data("taxonomy");return _("#attribute_values_"+e+" > option").removeAttr("selected"),_("#attribute_values_"+e).trigger("change"),_("#attribute_variation_"+e).is(":checked")&&l(t),d(),!1}),_(".product_attributes").on("change",".attribute_values",function(){var e=_(this).parent().data("index_value"),t=_("#attribute_position_"+e).val(),a=_(this).closest(".woocommerce_attribute").data("label");d(),n(_(this),t,a)}),_(".product_attributes").on("change",".wcv_variation_checkbox",function(){var e=_(this).parent().parent().parent().data("index_value"),t=_(this).closest(".woocommerce_attribute").data("taxonomy"),a=_(this).closest(".woocommerce_attribute").data("label"),i=_("#attribute_position_"+e).val(),r=_("#attribute_values_"+e);_(this).is(":checked")?n(r,i,a):l(t)}),_(".product_attributes").on("click",".remove_row",function(){if(window.confirm(wcv_frontend_product.remove_attribute)){var e=_(this).parent().parent();e.is(".taxonomy")?(e.find("select, input[type=text]").val(""),e.hide(),_(".attribute_taxonomy").find('option[value="'+e.data("taxonomy")+'"]').removeAttr("disabled")):(e.find("select, input[type=text]").val(""),e.hide(),o()),l(e.data("taxonomy")),d()}return!1}),_(".product_attributes").sortable({items:".woocommerce_attribute",cursor:"move",axis:"y",handle:"h5",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wcv-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.data("index_value");t.item.removeAttr("style"),o()}}),o(),_(".attribute_values").each(function(){var e=_(this).parent().data("index_value"),t=_("#attribute_position_"+e).val(),a=_(this).closest(".woocommerce_attribute").data("label");n(_(this),t,a)})}),_(".product_attributes").on("click","button.add_new_attribute",function(){_(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=_(this).parent().data("index_value"),t=_("#attribute_values_"+e),a=_(this).parent().data("taxonomy"),i=window.prompt(wcv_frontend_product.new_attribute_prompt);if(i){var r={action:"wcv_json_add_new_attribute",taxonomy:a,term:i,security:wcv_frontend_product.wcv_add_attribute_nonce};_.post(wcv_frontend_product.ajax_url,r,function(e){e.error?window.alert(e.error):e.slug&&(t.append(_("<option />").attr("value",e.slug).prop("selected","selected").text(e.name)),t.trigger("change"),_(t).select2("destroy").select2()),_(".product_attributes").unblock()})}else _(".product_attributes").unblock();return!1}),window.Parsley.on("form:submit",function(){return d()}),_("#wcv-product-edit").submit(function(e){if(1==wcv_frontend_product.require_featured_image&&""===_("#_featured_image_id").val()&&(_(".wcv_featured_image_msg").html(wcv_frontend_product.require_featured_image_msg),_(".wcv-featuredimg").css("background-color","rgba(150,8,12,.55)"),e.preventDefault()),1==wcv_frontend_product.require_gallery_image&&""===_("#product_image_gallery").val()&&(_(".wcv_gallery_msg").html(wcv_frontend_product.require_gallery_image_msg),e.preventDefault()),1==wcv_frontend_product.require_download_file){var t=_(".download_file_table"),a=t.length,i=!0;_(".downloadable_files").length&&(0==t.find(".download_file").length&&(i=!1),0<a?_(".download_file").each(function(){""!==_(this).find("td.file_name").find("input").val()&&""!==_(this).find("td.file_url").find("input").val()||(i=!1)}):i=!1,i||(_(".downloadable_files").append('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_download_file_msg+"</span>"),_(".download_file_table").css({color:"#b94a48","background-color":"#f2dede",border:"1px solid #cc0000"}),e.preventDefault()))}d()});var d=function(){var e=!0;_("li a.attributes").length&&1==wcv_frontend_product.require_attributes&&(0<_(".woocommerce_attribute ").length?_(".wcv_attribute_data").each(function(){_(this).find(".attribute_values").val()?(_(".attributes-validation-error").html(""),_("a.tabs-tab.attributes").css("background-color",""),_("a.tabs-tab.attributes").css("color","")):(_(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span>"),_("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),_("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),e=!1)}):(_(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span><br />"),_("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),_("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),e=!1));return e}});