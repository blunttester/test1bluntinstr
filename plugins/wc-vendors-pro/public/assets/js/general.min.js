jQuery(function(c){window.Parsley.addValidator("price",{validateString:function(e){var n=!0,t=wcv_frontend_general.thousand_separator,i=wcv_frontend_general.decimal_separator,a=wcv_frontend_general.digits_after_decimal,r=e.split(i);return!(-1<e.indexOf(t))&&(!(1<o(e,i))&&(c.each(r,function(e,t){return isNaN(t)?n=!1:1<r.length&&e===r.length-1&&(0===t.length||t.length>a)?n=!1:void 0}),n))},messages:{en:wcv_frontend_general.invalid_price_format}}),window.Parsley.addValidator("decimal",{validateString:function(e){var n=!0,i=e.split(".");return!(1<o(e,"."))&&(c.each(i,function(e,t){return isNaN(t)?n=!1:1<i.length&&e===i.length-1&&0===t.length?n=!1:void 0}),n)},messages:{en:wcv_frontend_general.invalid_number_format}});var o=function(e,t){for(var n=0,i=0;i<e.length;i++)e.charAt(i)==t&&(n+=1);return n};function e(e,t){c(e).is(":checked")?(t.prop("disabled",!0),t.each(function(){c(this).is(":checkbox")?c(this).removeAttr("checked"):c(this).val("")})):t.prop("disabled",!1)}c(".wcv-img-id").each(function(){var t=this.id;c(".wcv-file-uploader-add"+t).on("click",function(e){return e.preventDefault(),function(n){var i,a,r=c("#"+n),o=r.data("type"),e="";if(void 0!==i)return i.open();"document"===o?e="application":"input"!==o&&(e=o);(i=wp.media({title:r.data("window_title"),button:{text:r.data("save_button")},library:{type:e},multiple:!1})).on("select",function(){if(a=i.state().get("selection").first().toJSON(),!(c.trim(a.url.length)<0))if(r.val(a.id).change(),c(".wcv-file-uploader-add"+n).addClass("hidden"),c(".wcv-file-uploader-delete"+n).removeClass("hidden"),"image"!==o)if("video"!==o&&"audio"!==o&&"document"!==o)c(".wcv-file-uploader"+n).append('<div class="control-group"><div class="control"><input type="text" value="'+a.url+'" readonly/></div></div>');else{var e={action:"wcv_file_uploader_preview",file_url:a.url};c.post(wcv_frontend_general.ajax_url,e,function(e){c(".wcv-file-uploader"+n).append(e)})}else{var t=a.sizes.thumbnail?a.sizes.thumbnail.url:a.url;c(".wcv-file-uploader"+n).append('<img src="'+t+'" alt="'+a.caption+'" title="'+a.title+'" style="max-width: 100%;" />')}}),i.open()}(t),!1}),c(".wcv-file-uploader-delete"+t).on("click",function(e){e.preventDefault(),c(".wcv-file-uploader"+t).html(""),c("input[id="+t+"]").val(""),c(".wcv-file-uploader-delete"+t).addClass("hidden"),c(".wcv-file-uploader-reset"+t).addClass("hidden"),c(".wcv-file-uploader-add"+t).removeClass("hidden")})}),c("select#_wcv_shipping_from").change(function(){"other"===c(this).val()?c(".shipping_other").show():c(".shipping_other").hide()}).change(),c("#_wcv_shipping_fee_national_free").change(function(){e(c(this),c("#_wcv_shipping_fee_national"))}),c("#_wcv_shipping_fee_national_disable").change(function(){e(c(this),c(".wcv-disable-national-input"))}),c("#_wcv_shipping_fee_international_free").change(function(){e(c(this),c("#_wcv_shipping_fee_international"))}),c("#_wcv_shipping_fee_international_disable").change(function(){e(c(this),c(".wcv-disable-international-input"))}),"other"===c("#_wcv_shipping_from").val()?c(".shipping_other").show():c(".shipping_other").hide(),c(".wcv-vacaction-mode").change(function(){c(".wcv-vacation-mode-msg-wrapper").slideToggle()}),c(".wcv-vacaction-mode").is(":checked")&&c(".wcv-vacation-mode-msg-wrapper").show(),c(".wcv-enable-opening-hours").change(function(){c(".wcv-opening-hours-wrapper").slideToggle()}),c(".wcv-enable-opening-hours").is(":checked")?c(".wcv-opening-hours-wrapper").show():c(".wcv-opening-hours-wrapper").hide(),c(".wcv-datepicker").flatpickr({defaultDate:"",dateFormat:wcv_frontend_general.date_format}),c(".wcv-datetimepicker").flatpickr({enableTime:!0,dateFormat:wcv_frontend_general.date_format}),c(".wcv_shipped_date").on("click",function(){c(this).flatpickr({dateFormat:wcv_frontend_general.date_format}),c(this).flatpickr("show")}),c("#store_save_button").on("click",function(e){e.preventDefault();var t={action:"wcv_json_unique_store_name",store_name:c("#_wcv_store_name").val(),security:wcv_frontend_general.wcv_json_unique_store_name_nonce};c.post(wcv_frontend_general.ajax_url,t,function(e){if(e.error)return window.alert(e.error),!1;c("#wcv-store-settings").submit()})}),c(".wcv-form").parsley({trigger:"input",excluded:".is_hidden, input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled]",classHandler:function(e){return e.$element.hasClass("wcv_category_check")?e.$element.closest(".wcv_terms_checklist_container"):e.$element.hasClass("select2-hidden-accessible")?e.$element.parent().find(".select2-selection"):e},errorsContainer:function(e){return e.$element.hasClass("wcv_category_check")?e.$element.closest(".wcv_terms_checklist_container").parent():e.$element.hasClass("select2-hidden-accessible")?e.$element.parent():e}}),window.Parsley.on("field:error",function(){var e=this.$element.closest(".tabs-content").attr("id");c(".wcv-tabs").find("."+e).addClass("tab-has-error")}),window.Parsley.on("field:success",function(){var e=this.$element.closest(".tabs-content");if(!(0<e.find(".parsley-error").length)){var t=e.attr("id");c(".wcv-tabs").find("."+t).removeClass("tab-has-error")}}),"hidden"===Cookies.get("vendor_store_notice")?c(".woocommerce-store-notice").hide():c(".woocommerce-store-notice").show(),c("#clear_button").click(function(e){e.preventDefault();var t=c("#_wcv_order_start_date_input"),n=c("#_wcv_order_end_date_input");t.val(t.data("default")),n.val(n.data("default")),c(".wcv-order-header .wcv-form").submit()})});